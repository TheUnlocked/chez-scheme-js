<!DOCTYPE html>
<html>
    <head>
        <script type="module">
            import Scheme from '../dist/index.js';

            /** @type {HTMLPreElement} */
            const output = document.getElementById('output');
            /** @type {HTMLInputElement} */
            const input = document.getElementById('input');

            input.addEventListener('keyup', async ev => {
                if (ev.key === 'Enter') {
                    if (input.value === '') {
                        return;
                    }
                    output.innerText += input.value + '\n';
                    input.disabled = true;
                    const result = await scheme.runExpression(input.value);
                    output.innerText += result.join('\n');
                    output.innerText += `${result.length > 0 ? '\n' : ''}> `;
                    input.value = '';
                    input.disabled = false;
                    input.focus();
                }
            });

            const scheme = new Scheme({
                error: err => output.innerText += err,
            });
            output.innerText += await scheme.init() + '\n> ';
            input.focus();
        </script>
    </head>
    <body>
        <code><pre id="output"></pre></code>
        <code><input id="input" /></code>
    </body>
</html>